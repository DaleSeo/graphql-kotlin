"use strict";(self.webpackChunkgraphql_kotlin_docs=self.webpackChunkgraphql_kotlin_docs||[]).push([[8553],{9801:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var o=t(7462),r=t(3366),i=(t(7294),t(3905)),a=(t(8561),["components"]),l={id:"ktor-configuration",title:"Ktor Plugin Configuration"},s=void 0,u={unversionedId:"server/ktor-server/ktor-configuration",id:"server/ktor-server/ktor-configuration",title:"Ktor Plugin Configuration",description:"graphql-kotlin-ktor-server plugin can be configured by using DSL when installing the plugin. Configuration is broken into multiple",source:"@site/docs/server/ktor-server/ktor-configuration.md",sourceDirName:"server/ktor-server",slug:"/server/ktor-server/ktor-configuration",permalink:"/graphql-kotlin/docs/7.x.x/server/ktor-server/ktor-configuration",draft:!1,editUrl:"https://github.com/ExpediaGroup/graphql-kotlin/tree/master/website/docs/server/ktor-server/ktor-configuration.md",tags:[],version:"current",lastUpdatedBy:"Dariusz Kuc",lastUpdatedAt:1677269153,formattedLastUpdatedAt:"Feb 24, 2023",frontMatter:{id:"ktor-configuration",title:"Ktor Plugin Configuration"},sidebar:"docs",previous:{title:"HTTP request and response",permalink:"/graphql-kotlin/docs/7.x.x/server/ktor-server/ktor-http-request-response"},next:{title:"Client Overview",permalink:"/graphql-kotlin/docs/7.x.x/client/client-overview"}},p={},c=[{value:"Configuration Files",id:"configuration-files",level:2},{value:"Schema Configuration",id:"schema-configuration",level:2},{value:"GraphQL Execution Engine Configuration",id:"graphql-execution-engine-configuration",level:2},{value:"Server Configuration",id:"server-configuration",level:2},{value:"Routes Configuration",id:"routes-configuration",level:2},{value:"Tools Configuration",id:"tools-configuration",level:2}],d={toc:c};function g(e){var n=e.components,t=(0,r.Z)(e,a);return(0,i.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"graphql-kotlin-ktor-server")," plugin can be configured by using DSL when installing the plugin. Configuration is broken into multiple\ngroups related to specific functionality. See sections below for details."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"install(GraphQL) {\n    schema {\n        // configuration that controls schema generation logic\n    }\n    engine {\n        // configurations that control GraphQL execution engine\n    }\n    server {\n        // configurations that control GraphQL HTTP server\n    }\n    routes {\n        // routing configurations\n    }\n    tools {\n        // configurations for various tools\n    }\n}\n")),(0,i.kt)("h2",{id:"configuration-files"},"Configuration Files"),(0,i.kt)("p",null,"Ktor supports specifying configurations in ",(0,i.kt)("inlineCode",{parentName:"p"},"application.conf")," (HOCON) or ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yaml")," file. By default, only HOCON format\nis supported. To use a YAML configuration file, you need to add the ",(0,i.kt)("inlineCode",{parentName:"p"},"ktor-server-config-yaml")," dependency to your project dependencies.\nSee ",(0,i.kt)("a",{parentName:"p",href:"https://ktor.io/docs/configuration-file.html"},"Ktor documentation")," for details."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Not all configuration properties can be specified in your configuration file. You will need to use DSL to configure more advanced features\nthat cannot be represented in the property file syntax (e.g. any instantiated objects).")),(0,i.kt)("p",null,"All configuration options in ",(0,i.kt)("inlineCode",{parentName:"p"},"application.conf")," format, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'graphql {\n    schema {\n        // this is a required property that you need to set to appropriate value\n        // example value is just provided for illustration purposes\n        packages = [\n            "com.example"\n        ]\n        federation {\n            enabled = false\n            tracing {\n                enabled = true\n                debug = false\n            }\n        }\n    }\n    engine {\n        automaticPersistedQueries {\n            enabled = false\n        }\n        batching {\n            enabled = false\n            strategy = LEVEL_DISPATCHED\n        }\n        introspection {\n            enabled = true\n        }\n    }\n    server {\n        streamingResponse = true\n    }\n    routes {\n        endpoint = "graphql"\n    }\n    tools {\n        graphiql {\n            enabled = true\n            endpoint = "graphiql"\n        }\n        sdl {\n            enabled = true\n            endpoint = "sdl"\n            printAtStartup = false\n        }\n    }\n}\n')),(0,i.kt)("h2",{id:"schema-configuration"},"Schema Configuration"),(0,i.kt)("p",null,"This section configures ",(0,i.kt)("inlineCode",{parentName:"p"},"graphql-kotlin-schema-generation")," logic and is the ",(0,i.kt)("strong",{parentName:"p"},"only")," section that has to be configured.\nAt a minimum you need to configure the list of packages that can contain your GraphQL schema definitions and a list of queries."),(0,i.kt)("p",null,"All configuration options, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'schema {\n    // this is a required property that you need to set to appropriate value\n    // example value is just provided for illustration purposes\n    packages = listOf("com.example")\n    // non-federated schemas, require at least a single query\n    queries = listOf()\n    mutations = listOf()\n    schemaObject = null\n    // federated schemas require federated hooks\n    hooks = NoopSchemaGeneratorHooks\n    topLevelNames = TopLevelNames()\n    federation {\n        enabled = false\n        tracing {\n            enabled = true\n            debug = false\n        }\n    }\n}\n')),(0,i.kt)("h2",{id:"graphql-execution-engine-configuration"},"GraphQL Execution Engine Configuration"),(0,i.kt)("p",null,"This section configures ",(0,i.kt)("inlineCode",{parentName:"p"},"graphql-java")," execution engine that will be used to process your GraphQL requests."),(0,i.kt)("p",null,"All configuration options, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"engine {\n    automaticPersistedQueries {\n        enabled = false\n    }\n    // DO NOT enable default batching logic if specifying custom provider\n    batching {\n        enabled = false\n        strategy = SYNC_EXHAUSTION\n    }\n    introspection {\n        enabled = true\n    }\n    dataFetcherFactoryProvider = SimpleKotlinDataFetcherFactoryProvider()\n    dataLoaderRegistryFactory = KotlinDataLoaderRegistryFactory()\n    exceptionHandler = SimpleDataFetcherExceptionHandler()\n    executionIdProvider = null\n    idValueUnboxer = IDValueUnboxer()\n    instrumentations = emptyList()\n    // DO NOT specify custom provider if enabling default batching logic\n    preparsedDocumentProvider = null\n}\n")),(0,i.kt)("h2",{id:"server-configuration"},"Server Configuration"),(0,i.kt)("p",null,"This section configures your GraphQL HTTP server."),(0,i.kt)("p",null,"All configuration options, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"server {\n    contextFactory = DefaultKtorGraphQLContextFactory()\n    jacksonConfiguration = { }\n    requestParser = KtorGraphQLRequestParser(jacksonObjectMapper().apply(jacksonConfiguration))\n    streamingResponse = true\n}\n")),(0,i.kt)("h2",{id:"routes-configuration"},"Routes Configuration"),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Subscriptions are currently not supported.")),(0,i.kt)("p",null,"This section configures your GraphQL HTTP routes."),(0,i.kt)("p",null,"All configuration options, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'routes {\n    endpoint = "graphql"\n}\n')),(0,i.kt)("h2",{id:"tools-configuration"},"Tools Configuration"),(0,i.kt)("p",null,"This section configures various GraphQL tools to improve your developer experience. Currently, we provide support for\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/graphql/graphiql"},"GraphiQL IDE")," and an SDL endpoint."),(0,i.kt)("p",null,"All configuration options, with their default values are provided below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'tools {\n    graphiql {\n        enabled = true\n        endpoint = "graphiql"\n    }\n    sdl {\n        enabled = true\n        endpoint = "sdl"\n        printAtStartup = false\n    }\n}\n')))}g.isMDXComponent=!0}}]);